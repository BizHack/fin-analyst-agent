{% extends 'base.html' %}

{% block content %}
    <!-- Hero Section -->
    <div class="bg-midnight text-gray-200">
        <div class="container mx-auto px-4 py-12 md:py-20">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                <div class="mb-8 md:mb-0">
                    <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4 animate-fade-in">
                        <span class="text-gray-100">Fin</span>
                        <span class="text-[#38bdf8]">Hacker</span>
                    </h1>
                    <p class="text-lg md:text-xl text-gray-300 animate-fade-in">
                        Decoding Signals from Politics, Markets, and Social Media
                    </p>
                </div>
                
                <!-- Market Monitor Component -->
                <div class="w-full md:w-auto flex flex-wrap gap-3 justify-end">
                    <!-- SPY -->
                    <div class="bg-white rounded-md px-4 py-2 shadow-md">
                        <div class="flex items-center">
                            <div class="w-6 h-6 bg-white text-green-500 flex items-center justify-center mr-2">
                                <span class="text-lg">$</span>
                            </div>
                            <div>
                                <div class="flex items-center">
                                    <p class="text-xs text-gray-500">SPY</p>
                                    <p class="text-xs text-gray-400 ml-1">S&P 500</p>
                                </div>
                                <div class="flex items-center">
                                    <p class="font-medium text-gray-800" id="spy-price">${{ market_data.spy.price }}</p>
                                    <p id="spy-change" class="text-xs ml-2 {% if market_data.spy.change_direction == 'up' %}text-green-500{% else %}text-red-500{% endif %}">
                                        {% if market_data.spy.change_direction == 'up' %}
                                        <i class="fas fa-caret-up mr-1"></i>
                                        {% else %}
                                        <i class="fas fa-caret-down mr-1"></i>
                                        {% endif %}
                                        {{ market_data.spy.change }}%
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- BTC -->
                    <div class="bg-white rounded-md px-4 py-2 shadow-md">
                        <div class="flex items-center">
                            <div class="w-6 h-6 bg-white text-amber-500 flex items-center justify-center mr-2">
                                <span class="text-lg">â‚¿</span>
                            </div>
                            <div>
                                <div class="flex items-center">
                                    <p class="text-xs text-gray-500">BTC</p>
                                    <p class="text-xs text-gray-400 ml-1">Bitcoin</p>
                                </div>
                                <div class="flex items-center">
                                    <p class="font-medium text-gray-800" id="btc-price">${{ market_data.bitcoin.price }}</p>
                                    <p id="btc-change" class="text-xs ml-2 {% if market_data.bitcoin.change_direction == 'up' %}text-green-500{% else %}text-red-500{% endif %}">
                                        {% if market_data.bitcoin.change_direction == 'up' %}
                                        <i class="fas fa-caret-up mr-1"></i>
                                        {% else %}
                                        <i class="fas fa-caret-down mr-1"></i>
                                        {% endif %}
                                        {{ market_data.bitcoin.change }}%
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gold -->
                    <div class="bg-white rounded-md px-4 py-2 shadow-md">
                        <div class="flex items-center">
                            <div class="w-6 h-6 bg-white text-yellow-500 flex items-center justify-center mr-2">
                                <span class="text-lg">Au</span>
                            </div>
                            <div>
                                <div class="flex items-center">
                                    <p class="text-xs text-gray-500">GOLD</p>
                                    <p class="text-xs text-gray-400 ml-1">Gold</p>
                                </div>
                                <div class="flex items-center">
                                    <p class="font-medium text-gray-800" id="gold-price">${{ market_data.gold.price }}</p>
                                    <p id="gold-change" class="text-xs ml-2 {% if market_data.gold.change_direction == 'up' %}text-green-500{% else %}text-red-500{% endif %}">
                                        {% if market_data.gold.change_direction == 'up' %}
                                        <i class="fas fa-caret-up mr-1"></i>
                                        {% else %}
                                        <i class="fas fa-caret-down mr-1"></i>
                                        {% endif %}
                                        {{ market_data.gold.change }}%
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Market Monitor -->
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="container mx-auto px-4 py-6 md:py-10">
        <!-- Dashboard Tabs Component -->
        <div class="mt-8">
            <div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between">
                <h2 class="text-2xl font-semibold text-midnight mb-4 sm:mb-0">Market Intelligence</h2>
                
                <div class="flex items-center">
                    <label for="stock-select" class="text-sm font-medium mr-3">
                        Selected Stock:
                    </label>
                    <select
                        id="stock-select"
                        class="bg-white border border-gray-200 rounded-md px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-teal focus:border-transparent"
                    >
                        <option value="AAPL">AAPL - Apple Inc.</option>
                        <option value="MSFT">MSFT - Microsoft Corp.</option>
                        <option value="GOOGL">GOOGL - Alphabet Inc.</option>
                        <option value="AMZN">AMZN - Amazon.com Inc.</option>
                        <option value="TSLA">TSLA - Tesla Inc.</option>
                    </select>
                </div>
            </div>
            
            <!-- Tab Buttons -->
            <div class="grid grid-cols-4 mb-8 border-b border-gray-200">
                <button class="tab-button active" data-tab="sentiment">Sentiment</button>
                <button class="tab-button" data-tab="politicians">Politician Trades</button>
                <button class="tab-button" data-tab="technical">Technical Analysis</button>
                <button class="tab-button" data-tab="fundamental">Fundamentals</button>
            </div>
            
            <!-- Tab Content -->
            <div id="tab-content" class="animate-fade-in">
                <!-- Sentiment Tab -->
                <div id="sentiment-tab" class="tab-panel active">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6 border border-gray-100">
                            <h3 class="text-xl font-semibold text-black mb-2">Sentiment Analysis for <span class="ticker-symbol">AAPL</span></h3>
                            <p class="text-black text-sm mb-6">Analysis of social media sentiment across platforms</p>
                            
                            <p class="text-black mb-6">Overall bullish sentiment across social platforms with 65% positive mentions on Reddit. Recent product announcements have generated excitement, though some concerns about valuation remain. Twitter sentiment shows more mixed opinions with 20% negative comments primarily focused on supply chain concerns.</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <!-- Reddit -->
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <div class="flex items-center mb-3">
                                        <i class="fas fa-comment-alt mr-2 text-gray-600"></i>
                                        <h4 class="font-medium text-black">Reddit</h4>
                                    </div>
                                    
                                    <!-- Positive -->
                                    <div class="space-y-1 mb-2">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-black">Positive</span>
                                            <span class="font-medium text-black">65%</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-green-500" style="width: 65%"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Neutral -->
                                    <div class="space-y-1 mb-2">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-black">Neutral</span>
                                            <span class="font-medium text-black">25%</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-gray-400" style="width: 25%"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Negative -->
                                    <div class="space-y-1">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-black">Negative</span>
                                            <span class="font-medium text-black">10%</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-red-500" style="width: 10%"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Twitter/X -->
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <div class="flex items-center mb-3">
                                        <i class="fab fa-x-twitter mr-2 text-gray-600"></i>
                                        <h4 class="font-medium text-black">X</h4>
                                    </div>
                                    
                                    <!-- Positive -->
                                    <div class="space-y-1 mb-2">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-black">Positive</span>
                                            <span class="font-medium text-black">58%</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-green-500" style="width: 58%"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Neutral -->
                                    <div class="space-y-1 mb-2">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-black">Neutral</span>
                                            <span class="font-medium text-black">22%</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-gray-400" style="width: 22%"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Negative -->
                                    <div class="space-y-1">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-black">Negative</span>
                                            <span class="font-medium text-black">20%</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-red-500" style="width: 20%"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Truth Social -->
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <div class="flex items-center mb-3">
                                        <i class="fas fa-bullhorn mr-2 text-gray-600"></i>
                                        <h4 class="font-medium text-black">Truth Social</h4>
                                    </div>
                                    
                                    <!-- Positive -->
                                    <div class="space-y-1 mb-2">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-black">Positive</span>
                                            <span class="font-medium text-black">72%</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-green-500" style="width: 72%"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Neutral -->
                                    <div class="space-y-1 mb-2">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-black">Neutral</span>
                                            <span class="font-medium text-black">18%</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-gray-400" style="width: 18%"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Negative -->
                                    <div class="space-y-1">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-black">Negative</span>
                                            <span class="font-medium text-black">10%</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-red-500" style="width: 10%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Topics -->
                        <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                            <h3 class="text-xl font-semibold text-black mb-2">Key Topics</h3>
                            <p class="text-black text-sm mb-6">Most discussed topics</p>
                            
                            <div class="space-y-4">
                                <!-- Topic 1 -->
                                <div class="flex items-center justify-between border-b border-gray-100 pb-2">
                                    <div>
                                        <p class="font-medium text-black">Product Announcements</p>
                                        <p class="text-sm text-green-500">Positive</p>
                                    </div>
                                    <div class="text-sm text-black">
                                        234 mentions
                                    </div>
                                </div>
                                
                                <!-- Topic 2 -->
                                <div class="flex items-center justify-between border-b border-gray-100 pb-2">
                                    <div>
                                        <p class="font-medium text-black">Quarterly Earnings</p>
                                        <p class="text-sm text-black">Neutral</p>
                                    </div>
                                    <div class="text-sm text-black">
                                        187 mentions
                                    </div>
                                </div>
                                
                                <!-- Topic 3 -->
                                <div class="flex items-center justify-between border-b border-gray-100 pb-2">
                                    <div>
                                        <p class="font-medium text-black">Market Competition</p>
                                        <p class="text-sm text-amber-500">Mixed</p>
                                    </div>
                                    <div class="text-sm text-black">
                                        156 mentions
                                    </div>
                                </div>
                                
                                <!-- Topic 4 -->
                                <div class="flex items-center justify-between border-b border-gray-100 pb-2">
                                    <div>
                                        <p class="font-medium text-black">Leadership Changes</p>
                                        <p class="text-sm text-red-500">Negative</p>
                                    </div>
                                    <div class="text-sm text-black">
                                        98 mentions
                                    </div>
                                </div>
                                
                                <!-- Topic 5 -->
                                <div class="flex items-center justify-between pb-2">
                                    <div>
                                        <p class="font-medium text-black">Partnerships</p>
                                        <p class="text-sm text-green-500">Positive</p>
                                    </div>
                                    <div class="text-sm text-black">
                                        76 mentions
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Politician Trades Tab -->
                <div id="politicians-tab" class="tab-panel hidden">
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                        <div class="flex items-center mb-5">
                            <i class="fas fa-landmark text-gray-500 mr-3"></i>
                            <div>
                                <h3 class="text-xl font-semibold text-black">Political Trading Activity - <span class="ticker-symbol">AAPL</span></h3>
                                <p class="text-black text-sm">Recent congressional stock transactions</p>
                            </div>
                        </div>
                        
                        <p class="text-black mb-6">
                            Recent congressional trading activity shows 7 purchases and 3 sales of Apple stock in the last 30 days. Most notable was a $250,000 
                            purchase by Rep. Johnson on April 10th, following the tech committee hearing. Senator Wallace sold $180,000 worth just before the 
                            quarterly earnings announcement.
                        </p>
                        
                        <!-- Trading Table -->
                        <div class="overflow-x-auto mb-6">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Politician</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Party</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Context</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Rep. Michael Johnson</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <span class="h-4 w-4 rounded-full bg-red-500 inline-block"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 10, 2025</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-green-500 font-medium">BUY</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$250,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">After tech committee</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Sen. Maria Wallace</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <span class="h-4 w-4 rounded-full bg-blue-500 inline-block"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 15, 2025</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-red-500 font-medium">SELL</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$180,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Pre-earnings</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Rep. Thomas Lee</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <span class="h-4 w-4 rounded-full bg-blue-500 inline-block"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 8, 2025</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-green-500 font-medium">BUY</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$75,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">After product launch</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Sen. Robert Wilson</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <span class="h-4 w-4 rounded-full bg-red-500 inline-block"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 12, 2025</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-green-500 font-medium">BUY</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$120,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Standard disclosure</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">Rep. Sarah Martinez</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <span class="h-4 w-4 rounded-full bg-blue-500 inline-block"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Apr 14, 2025</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-red-500 font-medium">SELL</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">$95,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Portfolio rebalance</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Trading Pattern Analysis -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="text-sm font-semibold text-black mb-2">Trading Pattern Analysis</h4>
                            <p class="text-sm text-black">Unusual buying activity detected before product announcements. Correlation with committee assignments observed.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Technical Analysis Tab -->
                <div id="technical-tab" class="tab-panel hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6 border border-gray-100">
                            <h3 class="text-xl font-semibold text-black mb-2">Technical Analysis - <span class="ticker-symbol">AAPL</span></h3>
                            <p class="text-black text-sm mb-6">Price action and technical patterns</p>
                            
                            <p class="text-black mb-6">
                                Apple shows strong technical signals with the stock trading above both 50-day and 
                                200-day moving averages. Multiple support levels have held in recent tests. Current 
                                price action suggests consolidation after the recent breakout above $198, with 
                                significant resistance at $210. RSI indicates slightly overbought conditions at 72.
                            </p>
                            
                            <!-- Improved Chart -->
                            <div class="w-full h-72 bg-gray-50 rounded-lg mb-4 overflow-hidden border border-gray-100">
                                <div class="p-4 h-full">
                                    <div class="w-full h-full relative">
                                        <!-- Chart Container with proper margins for labels -->
                                        <svg class="w-full h-full" viewBox="0 0 440 240" preserveAspectRatio="none">
                                            <!-- Chart Background Grid -->
                                            <g class="grid-lines" stroke="#e5e7eb" stroke-width="0.5">
                                                <line x1="40" y1="20" x2="420" y2="20" />
                                                <line x1="40" y1="70" x2="420" y2="70" />
                                                <line x1="40" y1="120" x2="420" y2="120" />
                                                <line x1="40" y1="170" x2="420" y2="170" />
                                                <line x1="40" y1="20" x2="40" y2="170" />
                                                <line x1="100" y1="20" x2="100" y2="170" />
                                                <line x1="160" y1="20" x2="160" y2="170" />
                                                <line x1="220" y1="20" x2="220" y2="170" />
                                                <line x1="280" y1="20" x2="280" y2="170" />
                                                <line x1="340" y1="20" x2="340" y2="170" />
                                                <line x1="400" y1="20" x2="400" y2="170" />
                                            </g>
                                            
                                            <!-- Price Line with improved path definition -->
                                            <path d="M40,140 C60,120 80,100 100,95 S140,85 160,75 S200,60 220,50 S260,30 280,25 S320,15 340,10 S380,5 420,5" 
                                                  stroke="#38bdf8" stroke-width="2.5" fill="none" />
                                            
                                            <!-- MA50 Line with improved path definition -->
                                            <path d="M40,150 C80,130 120,110 160,95 S200,80 240,70 S280,50 320,40 S360,30 420,25" 
                                                  stroke="#9ca3af" stroke-width="1.5" fill="none" stroke-dasharray="4" />
                                            
                                            <!-- MA200 Line with improved path definition -->
                                            <path d="M40,170 C80,160 120,150 160,140 S200,130 240,120 S280,110 320,90 S360,80 420,70" 
                                                  stroke="#22c55e" stroke-width="1.5" fill="none" />
                                            
                                            <!-- Volume Bars (Improved) -->
                                            <g class="volume-bars" transform="translate(40, 0)">
                                                <rect x="0" y="190" width="8" height="10" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="20" y="180" width="8" height="20" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="40" y="185" width="8" height="15" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="60" y="175" width="8" height="25" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="80" y="170" width="8" height="30" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="100" y="180" width="8" height="20" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="120" y="185" width="8" height="15" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="140" y="190" width="8" height="10" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="160" y="180" width="8" height="20" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="180" y="175" width="8" height="25" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="200" y="160" width="8" height="40" fill="#38bdf8" opacity="0.5"></rect>
                                                <rect x="220" y="165" width="8" height="35" fill="#38bdf8" opacity="0.5"></rect>
                                                <rect x="240" y="180" width="8" height="20" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="260" y="185" width="8" height="15" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="280" y="170" width="8" height="30" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="300" y="165" width="8" height="35" fill="#38bdf8" opacity="0.5"></rect>
                                                <rect x="320" y="160" width="8" height="40" fill="#38bdf8" opacity="0.5"></rect>
                                                <rect x="340" y="170" width="8" height="30" fill="#9ca3af" opacity="0.4"></rect>
                                                <rect x="360" y="185" width="8" height="15" fill="#9ca3af" opacity="0.4"></rect>
                                            </g>
                                            
                                            <!-- Price Labels - Better positioned -->
                                            <g class="price-labels" fill="#000000" font-size="11">
                                                <text x="10" y="25" text-anchor="start" font-weight="500">$205</text>
                                                <text x="10" y="75" text-anchor="start">$200</text>
                                                <text x="10" y="125" text-anchor="start">$195</text>
                                                <text x="10" y="175" text-anchor="start">$190</text>
                                            </g>
                                            
                                            <!-- Date Labels - Better positioned and spaced -->
                                            <g class="date-labels" fill="#000000" font-size="10">
                                                <text x="40" y="215" text-anchor="middle">Apr 1</text>
                                                <text x="100" y="215" text-anchor="middle">Apr 5</text>
                                                <text x="160" y="215" text-anchor="middle">Apr 10</text>
                                                <text x="220" y="215" text-anchor="middle">Apr 15</text>
                                                <text x="280" y="215" text-anchor="middle">Apr 20</text>
                                                <text x="340" y="215" text-anchor="middle">Apr 25</text>
                                                <text x="400" y="215" text-anchor="middle">Apr 30</text>
                                            </g>
                                        </svg>
                                        
                                        <!-- Improved Legend -->
                                        <div class="absolute top-2 right-2 bg-white bg-opacity-80 p-2 rounded shadow-sm text-xs border border-gray-100">
                                            <div class="font-medium mb-1 text-black">AAPL Price Chart</div>
                                            <div class="flex items-center mb-1">
                                                <div class="w-4 h-1 bg-blue-400 mr-2"></div>
                                                <span class="text-black">Price</span>
                                            </div>
                                            <div class="flex items-center mb-1">
                                                <div class="w-4 h-1 bg-gray-400 mr-2" style="border-top: 1px dashed #9ca3af;"></div>
                                                <span class="text-black">50-day MA</span>
                                            </div>
                                            <div class="flex items-center">
                                                <div class="w-4 h-1 bg-green-500 mr-2"></div>
                                                <span class="text-black">200-day MA</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Technical Patterns -->
                        <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                            <h3 class="text-xl font-semibold text-black mb-2">Technical Patterns</h3>
                            <p class="text-black text-sm mb-6">Detected chart patterns and signals</p>
                            
                            <div class="space-y-4">
                                <!-- Pattern 1 -->
                                <div class="flex items-center justify-between border-b border-gray-100 pb-3">
                                    <div>
                                        <p class="font-medium">Recent Breakout</p>
                                        <p class="flex items-center">
                                            <span class="text-xs mr-2 bg-green-100 text-green-800 px-2 py-0.5 rounded">High</span>
                                            <span class="text-sm text-black">Status: Confirmed</span>
                                        </p>
                                    </div>
                                    <div class="text-sm text-black">
                                        Target: $215
                                    </div>
                                </div>
                                
                                <!-- Pattern 2 -->
                                <div class="flex items-center justify-between border-b border-gray-100 pb-3">
                                    <div>
                                        <p class="font-medium">Cup and Handle</p>
                                        <p class="flex items-center">
                                            <span class="text-xs mr-2 bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded">Medium</span>
                                            <span class="text-sm text-black">Status: Forming</span>
                                        </p>
                                    </div>
                                    <div class="text-sm text-black">
                                        Target: $225
                                    </div>
                                </div>
                                
                                <!-- Pattern 3 -->
                                <div class="flex items-center justify-between border-b border-gray-100 pb-3">
                                    <div>
                                        <p class="font-medium">Support Level</p>
                                        <p class="flex items-center">
                                            <span class="text-xs mr-2 bg-green-100 text-green-800 px-2 py-0.5 rounded">High</span>
                                            <span class="text-sm text-black">Status: Holding</span>
                                        </p>
                                    </div>
                                    <div class="text-sm text-black">
                                        Target: $195
                                    </div>
                                </div>
                                
                                <!-- Pattern 4 -->
                                <div class="flex items-center justify-between border-b border-gray-100 pb-3">
                                    <div>
                                        <p class="font-medium">Resistance Level</p>
                                        <p class="flex items-center">
                                            <span class="text-xs mr-2 bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded">Medium</span>
                                            <span class="text-sm text-black">Status: Testing</span>
                                        </p>
                                    </div>
                                    <div class="text-sm text-black">
                                        Target: $210
                                    </div>
                                </div>
                                
                                <!-- Key Levels -->
                                <div class="pt-2">
                                    <h4 class="text-sm font-semibold mb-2">Key Technical Levels</h4>
                                    <div class="grid grid-cols-2 gap-2 text-sm">
                                        <div>
                                            <p class="text-black">Resistance:</p>
                                            <p class="text-black">$210, $215, $225</p>
                                        </div>
                                        <div>
                                            <p class="text-black">Support:</p>
                                            <p class="text-black">$198, $195, $190</p>
                                        </div>
                                        <div class="col-span-2">
                                            <p class="text-black">RSI:</p>
                                            <p class="text-yellow-800">72 (Overbought)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Fundamental Tab -->
                <div id="fundamental-tab" class="tab-panel hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2">
                            <div class="flex items-center mb-4">
                                <span class="text-blue-500 mr-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                                </span>
                                <h3 class="text-xl font-semibold text-black">Fundamental Analysis - <span class="ticker-symbol">AAPL</span></h3>
                            </div>
                            <p class="text-black mb-4">Earnings reports and financial metrics</p>
                            
                            <div id="company-summary" class="text-black mb-6">
                                Apple continues to display strong fundamental metrics with a 15% year-over-year revenue growth and expanding profit margins. Recent earnings call highlighted significant growth in services revenue, now accounting for 25% of total revenue. Management emphasized AI integration plans for upcoming product lines. Balance sheet remains exceptionally strong with $195B cash and short-term investments.
                            </div>
                            
                            <!-- Quarterly Performance Chart -->
                            <div class="mb-6">
                                <h4 class="text-lg font-semibold text-black mb-3">Quarterly Performance</h4>
                                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                                    <div style="height: 280px; position: relative;">
                                        <!-- Chart Canvas -->
                                        <div class="flex h-full items-end">
                                            <!-- Q2 2024 -->
                                            <div class="flex flex-col items-center mx-1 flex-1">
                                                <div class="w-full flex space-x-1">
                                                    <div class="bg-blue-400 h-[180px] w-1/3"></div>
                                                    <div class="bg-black h-[60px] w-1/3"></div>
                                                    <div class="bg-green-500 h-[170px] w-1/3"></div>
                                                </div>
                                                <div class="text-black text-sm mt-2">Q2 2024</div>
                                            </div>
                                            
                                            <!-- Q3 2024 -->
                                            <div class="flex flex-col items-center mx-1 flex-1">
                                                <div class="w-full flex space-x-1">
                                                    <div class="bg-blue-400 h-[185px] w-1/3"></div>
                                                    <div class="bg-black h-[60px] w-1/3"></div>
                                                    <div class="bg-green-500 h-[175px] w-1/3"></div>
                                                </div>
                                                <div class="text-black text-sm mt-2">Q3 2024</div>
                                            </div>
                                            
                                            <!-- Q4 2024 -->
                                            <div class="flex flex-col items-center mx-1 flex-1">
                                                <div class="w-full flex space-x-1">
                                                    <div class="bg-blue-400 h-[190px] w-1/3"></div>
                                                    <div class="bg-black h-[60px] w-1/3"></div>
                                                    <div class="bg-green-500 h-[180px] w-1/3"></div>
                                                </div>
                                                <div class="text-black text-sm mt-2">Q4 2024</div>
                                            </div>
                                            
                                            <!-- Q1 2025 -->
                                            <div class="flex flex-col items-center mx-1 flex-1">
                                                <div class="w-full flex space-x-1">
                                                    <div class="bg-blue-400 h-[200px] w-1/3"></div>
                                                    <div class="bg-black h-[70px] w-1/3"></div>
                                                    <div class="bg-green-500 h-[190px] w-1/3"></div>
                                                </div>
                                                <div class="text-black text-sm mt-2">Q1 2025</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Y-axis labels would be positioned absolutely here -->
                                    </div>
                                    
                                    <!-- Chart Legend -->
                                    <div class="flex justify-center mt-4 text-sm">
                                        <div class="flex items-center mr-4">
                                            <div class="w-3 h-3 bg-blue-400 mr-1"></div>
                                            <span class="text-black">Revenue ($B)</span>
                                        </div>
                                        <div class="flex items-center mr-4">
                                            <div class="w-3 h-3 bg-black mr-1"></div>
                                            <span class="text-black">Net Income ($B)</span>
                                        </div>
                                        <div class="flex items-center">
                                            <div class="w-3 h-3 bg-green-500 mr-1"></div>
                                            <span class="text-black">EPS ($)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Key Metrics and Earnings Call -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <!-- Key Metrics -->
                                <div>
                                    <h4 class="text-lg font-semibold text-black mb-3">Key Metrics</h4>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <div class="space-y-2">
                                            <div class="flex justify-between pb-2 border-b border-gray-100">
                                                <span class="text-black">Revenue</span>
                                                <span class="text-black font-medium">Q1 2025: $96.5B (+15%)</span>
                                            </div>
                                            <div class="flex justify-between pb-2 border-b border-gray-100">
                                                <span class="text-black">EPS</span>
                                                <span class="text-black font-medium">$1.89 (+8%)</span>
                                            </div>
                                            <div class="flex justify-between pb-2 border-b border-gray-100">
                                                <span class="text-black">P/E Ratio</span>
                                                <span class="text-black font-medium">24.6x</span>
                                            </div>
                                            <div class="flex justify-between pb-2 border-b border-gray-100">
                                                <span class="text-black">Dividend Yield</span>
                                                <span class="text-black font-medium">0.5%</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-black">Debt-to-Equity</span>
                                                <span class="text-black font-medium">0.3</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Earnings Call Sentiment -->
                                <div>
                                    <h4 class="text-lg font-semibold text-black mb-3">Earnings Call Sentiment</h4>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <!-- Sentiment Bar -->
                                        <div class="mb-6 mt-2">
                                            <div class="flex w-full h-4 bg-gray-200 rounded-none overflow-hidden">
                                                <div class="bg-green-500" style="width: 55%"></div>
                                                <div class="bg-gray-400" style="width: 30%"></div>
                                                <div class="bg-red-500" style="width: 15%"></div>
                                            </div>
                                            <div class="flex mt-1">
                                                <div class="w-[55%] text-xs text-black">55% Positive</div>
                                                <div class="w-[30%] text-xs text-black">30% Neutral</div>
                                                <div class="w-[15%] text-xs text-black text-right">15% Negative</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Key Topics -->
                                        <div>
                                            <h5 class="text-sm font-medium text-black mb-2">Key Topics Mentioned</h5>
                                            <div class="flex flex-wrap gap-2">
                                                <span class="px-3 py-1 bg-gray-100 text-black text-xs rounded-full">AI Investments</span>
                                                <span class="px-3 py-1 bg-gray-100 text-black text-xs rounded-full">Search Revenue</span>
                                                <span class="px-3 py-1 bg-gray-100 text-black text-xs rounded-full">Cloud Profitability</span>
                                                <span class="px-3 py-1 bg-gray-100 text-black text-xs rounded-full">YouTube Growth</span>
                                                <span class="px-3 py-1 bg-gray-100 text-black text-xs rounded-full">Regulatory Challenges</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Analyst Consensus Card -->
                        <div>
                            <div class="flex items-center mb-4">
                                <span class="text-blue-500 mr-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-award"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>
                                </span>
                                <h3 class="text-xl font-semibold text-black">Analyst Consensus</h3>
                            </div>
                            <p class="text-black mb-4">Wall Street expectations</p>
                            
                            <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                                <!-- Consensus Rating -->
                                <div class="mb-6 text-center">
                                    <div class="inline-flex items-center justify-center w-32 h-32 rounded-full border-4 border-blue-400 mb-2">
                                        <div class="text-center">
                                            <div class="text-2xl font-bold text-black">BUY</div>
                                            <div class="text-sm text-gray-500">Consensus</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Price Target -->
                                <div class="mb-4">
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-black">Price Target</span>
                                        <span class="text-black font-medium">$225 (+10%)</span>
                                    </div>
                                    <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                        <div class="h-full bg-blue-400" style="width: 75%"></div>
                                    </div>
                                </div>
                                
                                <!-- Recommendations -->
                                <div class="space-y-2 mb-6">
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-black">Strong Buy</span>
                                            <span class="text-black">18/35</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-blue-400" style="width: 51%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-black">Buy</span>
                                            <span class="text-black">12/35</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-blue-400" style="width: 34%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-black">Hold</span>
                                            <span class="text-black">4/35</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-blue-400" style="width: 11%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-black">Sell</span>
                                            <span class="text-black">1/35</span>
                                        </div>
                                        <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-blue-400" style="width: 3%"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Estimates -->
                                <div class="space-y-2">
                                    <div class="flex justify-between pb-2 border-b border-gray-100">
                                        <span class="text-black">Revenue Est (FY25)</span>
                                        <span class="text-black font-medium">$390.2B</span>
                                    </div>
                                    <div class="flex justify-between pb-2 border-b border-gray-100">
                                        <span class="text-black">EPS Est (FY25)</span>
                                        <span class="text-black font-medium">$6.85</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-black">Growth Est (5yr)</span>
                                        <span class="text-black font-medium">12.5%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Main Action Button -->
                    <div class="mt-6 text-center">
                        <button type="button" id="viewFullFundamentals" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">
                            View Full Fundamental Analysis Dashboard
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Dashboard Tabs -->
    </div>
    
    {% endblock %}